## 进程（Process）和线程（Thread）

### 进程和线程是什么

进程是执行着的应用程序或者程序，而线程是进程内部的一个执行序列。一个进程可以有多个线程，每个线程并行执行不同的任务。不同的进程使用不同的内存空间，而所有的线程共享一片相同的内存空间。线程又叫做轻量级进程。 

### 区别：

**a.地址空间和其它资源**：进程间相互独立，同一进程的各线程间共享。某进程内的线程在其它进程不可见。

**b.通信：**进程间通信IPC，线程间可以直接读写进程数据段（如全局变量）来进行通信——需要进程同步和互斥手段的辅助，以保证数据的一致性。

**c.调度和切换**：线程上下文切换比进程上下文切换要快得多。

### 多任务

现实生活中这样同时做多件事情的例子，看起来时多个任务都在做，其实本质上我们的大脑再同一时间依旧只做了一件事情。 

### 核心概念

线程就是独立的执行路径；

在程序运行时，即使没有自己创建线程，后台也会有多个线程，如主线程，gc线程；

main称之为主线程，为系统的入口，用于执行整个程序；

在一个线程中，如果开辟了多个线程，线程的运行由调度器安排调度，调度器是与操作系统紧密相关的，先后顺序是不能人为干预的；

对同一份资源操作时，会存在资源抢夺的问题，需要加入并发控制；

线程会带来额外的开销，如cpu调度时间，并发控制开销；

每个线程在自己的工作内存交互，内存交互不当会造成数据不一致。

线程开启，并不一定立即执行，由CPU调度

### 普通方法调用和多线程

![image-20210708151841156](C:%5CUsers%5Cllj%5CDocuments%5Ctypero%E5%9B%BE%E5%83%8F%5Cimage-20210708151841156.png)

