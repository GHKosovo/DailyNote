## 什么是约束，常见的约束有哪些

在创建表的时候，可以给表的字段添加相应的约束，添加约束的目的是为了保证表中的数据的合法性、有效性、完整性。

常见约束有那些呢？

- 非空约束（not null）
- 唯一约束（unique）
- 主键约束（primary key）
- 外键约束（foreign key）
- 检查约束（check）:注意Oracle数据库有check约束，但是mysql没有，目前mysql不支持该约束。

## 非空约束 not null

就是不为空的意思，不讲，没意思

> not null 只有列级约束，没有表级约束

## 唯一性约束

唯一约束修饰的字段具有唯一性，不能重复。但可以为NULL

**给两个列或者多个列添加unique**

```
create table t_user(
	id int,
	usercode varchar(255),
	username varchar(255),
	unique(usercode,username)
);
```

## 主键约束

特点：不能为NULL，也不能重复

**主键约束的相关术语**

主键约束：primary key

主键字段：id字段添加primary key 之后，id 叫做主键字段

主键值：id字段中的每一个值

### 主键有什么作用？

表的设计三范式中有要求，第一范式就要求任何一张表都应该有主键；

主键的作用：主键值是这行记录在这张表当中的唯一表示。（就像人的身份证号码一样）

### 主键的分类

根据主键字段的字段数量来划分

- 单一主键
- 复合主键（多个字段联合起来添加一个主键约束）（不建议使用，因为违背三范式）

根据主键性质来划分

- 自然主键：主键值最好就是一个和业务没有任何关系的自然数（这种方式是推荐的）
- 业务主键：主键值和系统的业务挂钩，例如：拿着银行卡的卡号左主键，拿着身份证号码作为主键（不推荐用）；最好不要拿着和业务挂钩的字段作为主键。因为以后的业务一旦发送改变的时候，主键值可能也需要随着发生变化，但有的时候没有办法变化，因为变化可能会导致主键值重复。

> 一张表的主键约束只能有一个

**主键约束的表级约束**

```
create table 表名（
	id int,
	username varchar(255),
	primary key(id)
）;
//相比于列级约束
create table 表名（
	id int primary key,
	username varchar(255)
）;
```

### mysql提供主键值自增

`auto_increment`

案例：

```
create table 表名（
	id int primary key auto_increment,
	username varchar(255),
）;
```

> Tip: Oracle当中也提供了一个自增机制，叫做：序列（sequence）对象。

## 外键约束

外键约束其实就是省略数据的写法，比如班级号对应哪个班名，每次都写班名繁琐了，把班级号和班名独立出来，这样就可以更加剩墨水了。

关于外键约束的术语

- 外键约束：foreign key
- 外键字段：添加有外键约束的字段
- 外键值：外键字段中的每一个值。

顺序要求：

删除数据的时候，先删除子表数据，再删除父表数据；

添加数据的时候，先添加父表数据，再添加子表数据；

创建表的时候，先创建父表，再创建子表；

删除表的时候，先删除子表，再删除父表；

### 外键值可以为NULL?

外键可以为NULL

**外键字段引用其他表的某个字段的时候，被引用的字段必须是主键吗？**

注意：被引用的字段不一定是主键，但至少具有unique约束。

