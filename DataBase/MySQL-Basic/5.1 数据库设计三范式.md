# 数据库设计三范式

## 什么是设计范式

设计表的依据，按照这个三范式设计的表不回出现数据冗余

## 三范式都是哪些

第一范式：任何一张表都应该有主键，并且每一个字段原子性不可再分。

> 也就是字段不能再分，比如联系方式里可能有电话，邮箱，微信；这样就可以分为三个；

第二范式：建立在第一范式的基础之上，所有非主键字段完全依赖主键，不能产生部分依赖（也就是不能有复合主键）

**不符合第二范式，就是多对多，（多对多，三张表，关系表两外键）**

> 部分依赖指的是，某些字段依赖主键，而另外某些字段不依赖主键；比如学生姓名依赖于学生编号，学生编号为主键，同时表里还有教师编号和教师姓名，而教师姓名依赖于教师编号

第三范式：建立在第二范式的基础之上，所有非主键字段直接依赖，不能产生传递依赖。

**不符合第三范式，就是一对多，（一对多，两张表，多的表加外键）**

> 比如说，班级里面，学生编号为主键，有字段学生姓名、班级编号、班级名称；那么他们都满足第一范式和第二范式；

## 口诀

一对多，两张表，多的表加外键

多对多，三张表，关系表两外键

### 一对一怎么设计

- **方案一：主键共享**

t_user_login 用户登陆表

| id(pk) | username | password |
| ------ | -------- | -------- |
| 1      | zs       | 123      |
| 2      | ls       | 456      |

t_user_detail 用户详细信息表

| id(pk+fk) | realname | tel  |
| --------- | -------- | ---- |
| 1         | 张三     | 123  |
| 2         | 李四     | 123  |

- **方案二：外键唯一**

t_user_login 用户登陆表

| id(pk) | username | password |
| ------ | -------- | -------- |
| 1      | zs       | 123      |
| 2      | ls       | 456      |

t_user_detail 用户详细信息表

| id(pk) | realname | tel  | userid(fk+unique) |
| ------ | -------- | ---- | ----------------- |
| 1      | 张三     | 123  | 1                 |
| 2      | 李四     | 123  | 2                 |



